{"ast":null,"code":"import _asyncToGenerator from \"/Users/sistemasbatest/Documents/Personales/Proyectos/inmobiliaria-sb/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { first } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/auth\";\nexport class AuthService {\n  constructor(afAuth) {\n    this.afAuth = afAuth;\n    this.isLogged = false;\n    afAuth.authState.subscribe(user => this.isLogged = user);\n  }\n\n  onLogin(user) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const result = yield _this.afAuth.signInWithEmailAndPassword(user.email, user.password).then(userCredential => {\n        localStorage.setItem('token', userCredential.user.uid);\n        return true;\n      });\n      return result;\n    })();\n  }\n\n  onRegister(user) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        return yield _this2.afAuth.createUserWithEmailAndPassword(user.correo, user.clave);\n      } catch (error) {\n        return error;\n      }\n    })();\n  }\n\n  GetCurrentUser() {\n    return this.afAuth.authState.pipe(first()).toPromise();\n  }\n\n  LogOutCurrentUser() {\n    localStorage.removeItem('token');\n    this.afAuth.signOut();\n  }\n\n}\n\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)(i0.ɵɵinject(i1.AngularFireAuth));\n};\n\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["/Users/sistemasbatest/Documents/Personales/Proyectos/inmobiliaria-sb/src/app/services/auth.service.ts"],"names":["first","i0","i1","AuthService","constructor","afAuth","isLogged","authState","subscribe","user","onLogin","result","signInWithEmailAndPassword","email","password","then","userCredential","localStorage","setItem","uid","onRegister","createUserWithEmailAndPassword","correo","clave","error","GetCurrentUser","pipe","toPromise","LogOutCurrentUser","removeItem","signOut","ɵfac","AuthService_Factory","t","ɵɵinject","AngularFireAuth","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":";AAAA,SAASA,KAAT,QAAsB,gBAAtB;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,oBAApB;AACA,OAAO,MAAMC,WAAN,CAAkB;AACrBC,EAAAA,WAAW,CAACC,MAAD,EAAS;AAChB,SAAKA,MAAL,GAAcA,MAAd;AACA,SAAKC,QAAL,GAAgB,KAAhB;AACAD,IAAAA,MAAM,CAACE,SAAP,CAAiBC,SAAjB,CAA4BC,IAAD,IAAW,KAAKH,QAAL,GAAgBG,IAAtD;AACH;;AACKC,EAAAA,OAAO,CAACD,IAAD,EAAO;AAAA;;AAAA;AAChB,YAAME,MAAM,SAAS,KAAI,CAACN,MAAL,CAChBO,0BADgB,CACWH,IAAI,CAACI,KADhB,EACuBJ,IAAI,CAACK,QAD5B,EAEhBC,IAFgB,CAEVC,cAAD,IAAoB;AAC1BC,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,cAAc,CAACP,IAAf,CAAoBU,GAAlD;AACA,eAAO,IAAP;AACH,OALoB,CAArB;AAMA,aAAOR,MAAP;AAPgB;AAQnB;;AACKS,EAAAA,UAAU,CAACX,IAAD,EAAO;AAAA;;AAAA;AACnB,UAAI;AACA,qBAAa,MAAI,CAACJ,MAAL,CAAYgB,8BAAZ,CAA2CZ,IAAI,CAACa,MAAhD,EAAwDb,IAAI,CAACc,KAA7D,CAAb;AACH,OAFD,CAGA,OAAOC,KAAP,EAAc;AACV,eAAOA,KAAP;AACH;AANkB;AAOtB;;AACDC,EAAAA,cAAc,GAAG;AACb,WAAO,KAAKpB,MAAL,CAAYE,SAAZ,CAAsBmB,IAAtB,CAA2B1B,KAAK,EAAhC,EAAoC2B,SAApC,EAAP;AACH;;AACDC,EAAAA,iBAAiB,GAAG;AAChBX,IAAAA,YAAY,CAACY,UAAb,CAAwB,OAAxB;AACA,SAAKxB,MAAL,CAAYyB,OAAZ;AACH;;AA7BoB;;AA+BzB3B,WAAW,CAAC4B,IAAZ,GAAmB,SAASC,mBAAT,CAA6BC,CAA7B,EAAgC;AAAE,SAAO,KAAKA,CAAC,IAAI9B,WAAV,EAAuBF,EAAE,CAACiC,QAAH,CAAYhC,EAAE,CAACiC,eAAf,CAAvB,CAAP;AAAiE,CAAtH;;AACAhC,WAAW,CAACiC,KAAZ,GAAoB,aAAcnC,EAAE,CAACoC,kBAAH,CAAsB;AAAEC,EAAAA,KAAK,EAAEnC,WAAT;AAAsBoC,EAAAA,OAAO,EAAEpC,WAAW,CAAC4B,IAA3C;AAAiDS,EAAAA,UAAU,EAAE;AAA7D,CAAtB,CAAlC","sourcesContent":["import { first } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/auth\";\nexport class AuthService {\n    constructor(afAuth) {\n        this.afAuth = afAuth;\n        this.isLogged = false;\n        afAuth.authState.subscribe((user) => (this.isLogged = user));\n    }\n    async onLogin(user) {\n        const result = await this.afAuth\n            .signInWithEmailAndPassword(user.email, user.password)\n            .then((userCredential) => {\n            localStorage.setItem('token', userCredential.user.uid);\n            return true;\n        });\n        return result;\n    }\n    async onRegister(user) {\n        try {\n            return await this.afAuth.createUserWithEmailAndPassword(user.correo, user.clave);\n        }\n        catch (error) {\n            return error;\n        }\n    }\n    GetCurrentUser() {\n        return this.afAuth.authState.pipe(first()).toPromise();\n    }\n    LogOutCurrentUser() {\n        localStorage.removeItem('token');\n        this.afAuth.signOut();\n    }\n}\nAuthService.ɵfac = function AuthService_Factory(t) { return new (t || AuthService)(i0.ɵɵinject(i1.AngularFireAuth)); };\nAuthService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: AuthService, factory: AuthService.ɵfac, providedIn: 'root' });\n"]},"metadata":{},"sourceType":"module"}